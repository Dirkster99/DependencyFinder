<Fluent:RibbonWindow x:Class="DependencyFinder.UI.Views.ShellView"
                     xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                     xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                     xmlns:Fluent="urn:fluent-ribbon"
                     xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                     xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                     xmlns:local="clr-namespace:DependencyFinder.UI.ViewModels"
                     xmlns:models="clr-namespace:DependencyFinder.UI.Models"
                     xmlns:converters="clr-namespace:DependencyFinder.UI.ValueConverters"
                     xmlns:controls="clr-namespace:DependencyFinder.UI.Controls"
                     xmlns:cal="http://www.caliburnproject.org"
                     xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
                     cal:Message.Attach="[Event Loaded] = [Action OnLoaded()]"
                     mc:Ignorable="d"
                     Title="ShellView" Height="450" Width="800">
    <Fluent:RibbonWindow.Resources>
        <converters:BooleanToVisiblityConverter x:Key="boolToVisibilityConverter"/>
    </Fluent:RibbonWindow.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Fluent:Ribbon Grid.Row="0">
            <!--Backstage-->
            <Fluent:Ribbon.Menu>
                <Fluent:Backstage>
                </Fluent:Backstage>
            </Fluent:Ribbon.Menu>

            <!--Tabs-->
            <Fluent:RibbonTabItem Header="Home">
                <Fluent:RibbonGroupBox Header="Main">
                    <Fluent:Button Header="Refresh" />
                </Fluent:RibbonGroupBox>
            </Fluent:RibbonTabItem>
        </Fluent:Ribbon>

        <Grid Grid.Row="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="50*" />
                <ColumnDefinition Width="127*" />
            </Grid.ColumnDefinitions>

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"></ColumnDefinition>
                    <ColumnDefinition Width="20"></ColumnDefinition>
                </Grid.ColumnDefinitions>
                <xctk:WatermarkTextBox Watermark="Search..." 
                                       Grid.Row="0"
                                       HorizontalAlignment="Stretch"
                                       Text="{Binding Filter, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                       x:Name="FilterBox"/>
                <Button Grid.Column="1" 
                        Background="#363636"
                        Foreground="White"
                        Content="X"
                        cal:Message.Attach="[Event Click] = [Action OnClearFilter()]"/>
            </Grid>
            

            <TreeView Grid.Row="1"
                      Grid.Column="0"
                      ItemsSource="{Binding Solutions}"
                      Background="#363636"
                      ItemContainerStyle="{StaticResource TreeviewItemStyle}"
                      Padding="0, 10, 0, 0">
                

                <TreeView.Resources>
                    <HierarchicalDataTemplate  DataType="{x:Type models:SolutionViewModel}"
                                               ItemsSource="{Binding Children}"
                                               >
                        <StackPanel Orientation="Horizontal" ToolTip="{Binding FullName}">
                            <Rectangle Width="16" Height="16" Margin="3,0" Fill="{StaticResource SolutionIconBrush}"/>
                            <controls:HighlightingTextBlock Style="{StaticResource SearchTextBlockStyle}" />
                        </StackPanel>
                    </HierarchicalDataTemplate>

                    <HierarchicalDataTemplate  DataType="{x:Type models:ProjectViewModel}"
                                               ItemsSource="{Binding Children}">
                        <StackPanel Orientation="Horizontal" ToolTip="{Binding FullName}">
                            <Rectangle Width="16" Height="16" Margin="3,0" Fill="{StaticResource ProjectIconBrush}"/>
                            <controls:HighlightingTextBlock>
                                <controls:HighlightingTextBlock.Style>
                                    <Style TargetType="controls:HighlightingTextBlock">
                                        <Setter Property="Text" Value="{Binding Name}" />
                                        <Setter Property="HighlightText" Value="{Binding ElementName=FilterBox, Path=Text}" />
                                        <Setter Property="HighlightBackground" Value="#FEFCC8" />
                                        <Setter Property="HighlightForeground" Value="Black" />
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding IsNetCore}" Value="False">
                                                <Setter Property="Foreground" Value="Red"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </controls:HighlightingTextBlock.Style>
                            </controls:HighlightingTextBlock>
                        </StackPanel>
                    </HierarchicalDataTemplate>
                   
                    <HierarchicalDataTemplate  DataType="{x:Type models:ProjectRefViewModel}"
                                               ItemsSource="{Binding Children}">
                        <StackPanel Orientation="Horizontal" ToolTip="{Binding FullName}">
                            <Rectangle Width="16" Height="16" Margin="3,0" Fill="{StaticResource ProjectReferenceBrush2}"/>
                            <controls:HighlightingTextBlock Style="{StaticResource SearchTextBlockStyle}" />
                        </StackPanel>
                    </HierarchicalDataTemplate>

                    <HierarchicalDataTemplate  DataType="{x:Type models:NugetViewModel}"
                                               ItemsSource="{Binding Children}">
                        <StackPanel Orientation="Horizontal" ToolTip="{Binding FullName}">
                            <Rectangle Width="16" Height="16" Margin="3,0" Fill="{StaticResource NugetIconBrush}"/>
                            <controls:HighlightingTextBlock Style="{StaticResource SearchTextBlockStyle}" />
                        </StackPanel>
                    </HierarchicalDataTemplate>

                    <HierarchicalDataTemplate  DataType="{x:Type models:ProjectCollectionViewModel}"
                                               ItemsSource="{Binding Children}">
                        <StackPanel Orientation="Horizontal">
                            <Rectangle Width="16" Height="16" Margin="3,0" Fill="{StaticResource ProjectReferenceBrush2}"/>
                            <TextBlock Text="{Binding Name}"></TextBlock>
                        </StackPanel>
                    </HierarchicalDataTemplate>

                    <HierarchicalDataTemplate  DataType="{x:Type models:NugetCollectionViewModel}"
                                               ItemsSource="{Binding Children}">
                        <StackPanel Orientation="Horizontal">
                            <Rectangle Width="16" Height="16" Margin="3,0" Fill="{StaticResource NugetIconBrush}"/>
                            <TextBlock Text="{Binding Name}"></TextBlock>
                        </StackPanel>
                    </HierarchicalDataTemplate>
                </TreeView.Resources>
            </TreeView>
        </Grid>
    </Grid>
</Fluent:RibbonWindow>